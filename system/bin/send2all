#!/bin/bash
# send2all
# Matt Allbright
# send2all sends all files in a folder (or singular file) to all nodes on the cluster

host=`hostname`

workingdir=`pwd`

if [ $# -eq 0 ]; then
    echo "usage: $name [source]"
    echo "  source          Full path will be mirrored through rsync"
    exit 1
fi

if [ $host != "hope" ]; then
  rsync -ar "$workingdir/$1" root@hope:"$workingdir/$1"
fi
if [ $host != "empire" ]; then
  rsync -ar "$workingdir/$1" root@empire:"$workingdir/$1"
fi
if [ $host != "jedi" ]; then
  rsync -ar "$workingdir/$1" root@jedi:"$workingdir/$1"
fi
if [ $host != "norman" ]; then
  rsync -ar "$workingdir/$1" root@norman:"$workingdir/$1"
fi
if [ $host != "rufus" ]; then
  rsync -ar "$workingdir/$1" root@rufus:"$workingdir/$1"
fi
if [ $host != "wilbur" ]; then
  rsync -ar "$workingdir/$1" root@wilbur:"$workingdir/$1"
fi
if [ $host != "hyperion" ]; then
  rsync -ar "$workingdir/$1" root@hyperion:"$workingdir/$1"
fi
