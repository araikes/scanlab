#!/bin/bash

# slurm_reset
# Matt Allbright
# Simple utility to reset slurm nodes on network.

echo "Restarting all daemons."

echo "Restarting hope"
ssh root@hope /etc/init.d/munge restart
wait
ssh root@hope /etc/init.d/slurmctld restart
wait
ssh root@hope /etc/init.d/slurmd restart
wait
ssh root@hope /etc/init.d/slurmdbd restart
wait
echo "Restarting empire"
ssh root@empire /etc/init.d/munge restart
wait
ssh root@empire /etc/init.d/slurmctld restart
wait
ssh root@empire /etc/init.d/slurmd restart
wait
echo "Restarting jedi"
ssh root@jedi /etc/init.d/munge restart
wait
ssh root@jedi /etc/init.d/slurmd restart
wait
echo "Restarting hyperion"
ssh root@hyperion /etc/init.d/munge restart
wait
ssh root@hyperion /etc/init.d/slurmd restart
wait
echo "Restarting norman"
ssh root@norman /etc/init.d/munge restart
wait
ssh root@norman /etc/init.d/slurmd restart
wait
echo "Restarting wilbur"
ssh root@wilbur /etc/init.d/munge restart
wait
ssh root@wilbur /etc/init.d/slurmd restart
wait
echo "Restarting rufus"
ssh root@rufus /etc/init.d/munge restart
wait
ssh root@rufus /etc/init.d/slurmd restart
wait
