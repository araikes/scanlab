#!/bin/bash

# slurm_reset
# Matt Allbright
# Simple utility to reset slurm nodes on network.

echo "Restarting all daemons."

echo "Restarting hope"
ssh root@hope /usr/sbin/munge restart
wait
ssh root@hope /usr/sbin/slurmctld restart
wait
ssh root@hope /usr/sbin/slurmd restart
wait
#ssh root@hope /usr/sbin/slurmdbd restart
#wait
echo "Restarting empire"
ssh root@empire /usr/sbin/munge restart
wait
ssh root@empire /usr/sbin/slurmctld restart
wait
ssh root@empire /usr/sbin/slurmd restart
wait
echo "Restarting jedi"
ssh root@jedi /usr/sbin/munge restart
wait
ssh root@jedi /usr/sbin/slurmd restart
wait
echo "Restarting hyperion"
ssh root@hyperion /usr/sbin/munge restart
wait
ssh root@hyperion /usr/sbin/slurmd restart
wait
echo "Restarting norman"
ssh root@norman /usr/sbin/munge restart
wait
ssh root@norman /usr/sbin/slurmd restart
wait
echo "Restarting wilbur"
ssh root@wilbur /usr/sbin/munge restart
wait
ssh root@wilbur /usr/sbin/slurmd restart
wait
echo "Restarting rufus"
ssh root@rufus /usr/sbin/munge restart
wait
ssh root@rufus /usr/sbin/slurmd restart
wait
